{% extends 'teacher/teacherbase.html' %}
{% load widget_tweaks %}

{% block title %}Dashboard - Teacher Portal{% endblock %}
{% block page_title %}Teaching Dashboard{% endblock %}
{% block breadcrumb %}Dashboard{% endblock %}

{% block content %}
<div class="space-y-6">
  <!-- Welcome Section -->
  <div class="gradient-bg rounded-2xl p-8 text-white relative overflow-hidden">
    <div class="relative z-10">
      <h2 class="text-3xl font-bold mb-2">Welcome back, {{request.user.first_name}}!</h2>
      <p class="text-lg opacity-90 mb-6">Manage your courses and questions from your teaching dashboard.</p>
      
      <div class="flex flex-wrap gap-4">
        <a href="/teacher/teacher-add-exam" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-6 py-3 rounded-lg font-semibold transition-all duration-300 hover:transform hover:scale-105">
          <i class="fas fa-plus mr-2"></i>
          Create New Course
        </a>
        <a href="/teacher/teacher-add-question" class="border-2 border-white border-opacity-50 hover:bg-white hover:text-purple-600 px-6 py-3 rounded-lg font-semibold transition-all duration-300">
          <i class="fas fa-question mr-2"></i>
          Add Questions
        </a>
      </div>
    </div>
    
    <!-- Background decoration -->
    <div class="absolute -right-10 -top-10 w-40 h-40 bg-white bg-opacity-10 rounded-full"></div>
    <div class="absolute -right-5 -bottom-5 w-24 h-24 bg-white bg-opacity-10 rounded-full"></div>
    <div class="absolute -left-10 top-1/2 w-16 h-16 bg-white bg-opacity-10 rounded-full"></div>
  </div>

  <!-- Quick Stats -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <!-- Total Students -->
    <div class="bg-white rounded-xl p-6 shadow-lg card-hover border border-gray-100">
      <div class="flex items-center justify-between mb-4">
        <div class="p-3 bg-blue-50 rounded-lg">
          <i class="fas fa-user-graduate text-2xl text-blue-500"></i>
        </div>
        <span class="text-3xl font-bold text-gray-800">{{total_student}}</span>
      </div>
      <h3 class="font-semibold text-gray-800 mb-1">Total Students</h3>
      <p class="text-sm text-gray-600">Enrolled across all courses</p>
    </div>

    <!-- Active Courses -->
    <div class="bg-white rounded-xl p-6 shadow-lg card-hover border border-gray-100">
      <div class="flex items-center justify-between mb-4">
        <div class="p-3 bg-purple-50 rounded-lg">
          <i class="fas fa-book text-2xl text-purple-500"></i>
        </div>
        <span class="text-3xl font-bold text-gray-800">{{total_course}}</span>
      </div>
      <h3 class="font-semibold text-gray-800 mb-1">My Courses</h3>
      <p class="text-sm text-gray-600">Courses you've created</p>
    </div>

    <!-- Total Questions -->
    <div class="bg-white rounded-xl p-6 shadow-lg card-hover border border-gray-100">
      <div class="flex items-center justify-between mb-4">
        <div class="p-3 bg-green-50 rounded-lg">
          <i class="fas fa-question-circle text-2xl text-green-500"></i>
        </div>
        <span class="text-3xl font-bold text-gray-800">{{total_question}}</span>
      </div>
      <h3 class="font-semibold text-gray-800 mb-1">Question Bank</h3>
      <p class="text-sm text-gray-600">Questions created</p>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Course Management -->
    <div class="bg-white rounded-xl shadow-lg border border-gray-100">
      <div class="p-6 border-b border-gray-200">
        <h3 class="text-xl font-bold text-gray-800 flex items-center">
          <i class="fas fa-book mr-3 text-purple-500"></i>
          Course Management
        </h3>
      </div>
      <div class="p-6 space-y-4">
        <a href="/teacher/teacher-add-exam" class="flex items-center space-x-3 p-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all duration-300 hover:transform hover:scale-105">
          <i class="fas fa-plus"></i>
          <span class="font-medium">Create New Course</span>
        </a>
        
        <a href="/teacher/teacher-view-exam" class="flex items-center space-x-3 p-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 hover:transform hover:scale-105">
          <i class="fas fa-eye"></i>
          <span class="font-medium">View My Courses</span>
        </a>
        
        <div class="p-4 bg-gray-50 rounded-lg">
          <p class="text-sm text-gray-600">
            <i class="fas fa-info-circle mr-2 text-blue-500"></i>
            Manage your course settings, set question limits, and total marks.
          </p>
        </div>
      </div>
    </div>

    <!-- Question Management -->
    <div class="bg-white rounded-xl shadow-lg border border-gray-100">
      <div class="p-6 border-b border-gray-200">
        <h3 class="text-xl font-bold text-gray-800 flex items-center">
          <i class="fas fa-question-circle mr-3 text-green-500"></i>
          Question Management
        </h3>
      </div>
      <div class="p-6 space-y-4">
        <a href="/teacher/teacher-add-question" class="flex items-center space-x-3 p-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300 hover:transform hover:scale-105">
          <i class="fas fa-question"></i>
          <span class="font-medium">Add New Question</span>
        </a>
        
        <a href="/teacher/teacher-view-question" class="flex items-center space-x-3 p-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-300 hover:transform hover:scale-105">
          <i class="fas fa-list"></i>
          <span class="font-medium">View Questions</span>
        </a>
        
        <div class="p-4 bg-gray-50 rounded-lg">
          <p class="text-sm text-gray-600">
            <i class="fas fa-info-circle mr-2 text-green-500"></i>
            Create multiple choice questions for your courses with correct answers.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Getting Started Guide (for new teachers) -->
  <div class="bg-white rounded-xl shadow-lg border border-gray-100">
    <div class="p-6 border-b border-gray-200">
      <h3 class="text-xl font-bold text-gray-800 flex items-center">
        <i class="fas fa-rocket mr-3 text-blue-500"></i>
        Getting Started
      </h3>
    </div>
    <div class="p-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="text-center p-4 border border-gray-200 rounded-lg">
          <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <span class="text-xl font-bold text-purple-600">1</span>
          </div>
          <h4 class="font-semibold text-gray-800 mb-2">Create Course</h4>
          <p class="text-sm text-gray-600">Set up your course with name, question count, and total marks</p>
        </div>

        <div class="text-center p-4 border border-gray-200 rounded-lg">
          <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <span class="text-xl font-bold text-green-600">2</span>
          </div>
          <h4 class="font-semibold text-gray-800 mb-2">Add Questions</h4>
          <p class="text-sm text-gray-600">Create multiple choice questions with 4 options and correct answers</p>
        </div>

        <div class="text-center p-4 border border-gray-200 rounded-lg">
          <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <span class="text-xl font-bold text-blue-600">3</span>
          </div>
          <h4 class="font-semibold text-gray-800 mb-2">Students Take Exam</h4>
          <p class="text-sm text-gray-600">Students can now access and take your exams</p>
        </div>
      </div>
    </div>
  </div>

</div>

<script>
  // Animation on page load
  document.addEventListener('DOMContentLoaded', function() {
    // Animate stats on load
    const statNumbers = document.querySelectorAll('.text-3xl.font-bold');
    statNumbers.forEach(stat => {
      const finalNumber = parseInt(stat.textContent);
      if (!isNaN(finalNumber) && finalNumber > 0) {
        let currentNumber = 0;
        const increment = finalNumber / 30;
        
        const counter = setInterval(() => {
          currentNumber += increment;
          if (currentNumber >= finalNumber) {
            stat.textContent = finalNumber;
            clearInterval(counter);
          } else {
            stat.textContent = Math.floor(currentNumber);
          }
        }, 50);
      }
    });

    // Animate cards
    const cards = document.querySelectorAll('.card-hover');
    cards.forEach((card, index) => {
      card.style.opacity = '0';
      card.style.transform = 'translateY(20px)';
      
      setTimeout(() => {
        card.style.transition = 'all 0.5s ease';
        card.style.opacity = '1';
        card.style.transform = 'translateY(0)';
      }, index * 100);
    });
  });
</script>
{% endblock content %}